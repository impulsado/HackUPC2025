<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Vueling Blackout</title>
  <!-- PWA manifest + theme‑color -->
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#0a84ff">

  <!-- iOS “add to home” icon -->
  <link rel="apple-touch-icon" href="icons/icon-192.png">
  <style>
    /* ---------------  iOS Dark Pro palette  ---------------- */
    :root{
      --bg-main:#000;--bg-surface:rgba(28,28,30,.80);--bg-hover:rgba(44,44,46,.88);
      --outline:rgba(255,255,255,.08);--accent:#0a84ff;--accent-hover:#5ac8ff;
      --text-main:#fff;--text-muted:#9d9d9d;
      --radius-lg:18px;--radius-md:14px;--radius-sm:10px;
    }
    /* ---------------  Reset / base  ------------------------ */
    *{box-sizing:border-box;-webkit-tap-highlight-color:transparent}
    body{
      margin:0;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif;
      background:var(--bg-main);color:var(--text-main);display:flex;justify-content:center;
    }
    /* ---------------  Layout container  -------------------- */
    .container{
      width:100%;max-width:680px;
      padding:calc(env(safe-area-inset-top)+2rem) 1.25rem env(safe-area-inset-bottom) 1.25rem;
      display:flex;flex-direction:column;gap:1.75rem;
    }
    h1{margin:0;text-align:center;font-weight:700;font-size:clamp(1.8rem,2vw+1.2rem,2.3rem);letter-spacing:-.25px}

    /* ---------------  Buttons & inputs  -------------------- */
    #scan{
      align-self:center;background:var(--accent);color:#fff;border:none;
      padding:.7rem 1.6rem;border-radius:var(--radius-lg);font-size:1.0625rem;font-weight:600;
      backdrop-filter:blur(10px) saturate(160%);-webkit-backdrop-filter:blur(10px) saturate(160%);
      box-shadow:0 10px 18px rgba(10,132,255,.28);cursor:pointer;
      transition:background .22s,box-shadow .22s,transform .12s;
    }
    #scan:hover{background:var(--accent-hover)}
    #scan:active{transform:scale(.97);box-shadow:0 6px 14px rgba(10,132,255,.28)}
    #scan:focus-visible{outline:2px solid var(--accent-hover);outline-offset:2px}

    #filter{
      width:100%;max-width:260px;align-self:center;
      padding:.55rem 1rem;border:none;border-radius:var(--radius-md);
      background:var(--bg-surface);color:var(--text-main);font-size:1rem;
      backdrop-filter:blur(14px) saturate(150%);-webkit-backdrop-filter:blur(14px) saturate(150%);
    }
    #filter::placeholder{color:var(--text-muted)}

    /* ---------------  Table  -------------------------------- */
    table{
      width:100%;border-collapse:collapse;background:var(--bg-surface);
      backdrop-filter:blur(18px) saturate(150%);-webkit-backdrop-filter:blur(18px) saturate(150%);
      border:1px solid var(--outline);border-radius:var(--radius-lg);overflow:hidden;
    }
    caption{display:none}
    th,td{padding:.8rem 1.1rem;text-align:left;vertical-align:top}
    th{
      font-size:.875rem;font-weight:600;letter-spacing:-.1px;color:var(--text-muted);
      border-bottom:1px solid var(--outline);cursor:pointer;user-select:none
    }
    tr:not(:last-child) td{border-bottom:1px solid var(--outline)}
    tr:hover td{background:var(--bg-hover)}
    th.sort-asc::after{content:" ▲"} th.sort-desc::after{content:" ▼"}

    /* ---------------  Log  ---------------------------------- */
    #log{
      background:var(--bg-surface);backdrop-filter:blur(18px) saturate(150%);
      -webkit-backdrop-filter:blur(18px) saturate(150%);
      border:1px solid var(--outline);border-radius:var(--radius-md);
      padding:1rem 1.25rem;font-size:.85rem;color:var(--text-muted);
      white-space:pre-wrap;overflow-x:auto;
    }

    @media(min-width:768px){.container{gap:2rem}th,td{padding:.9rem 1.25rem}}
  </style>
</head>

<body>
  <main class="container">
    <h1>Vueling Blackout</h1>

    <button id="scan">Connect</button>

    <!-- NUEVO: campo de filtro -->
    <input id="filter" placeholder="Filter flight (e.g. VY0123)" />

    <table id="table" aria-label="Flight updates">
      <thead>
        <tr>
          <th data-col="flight">Flight</th>
          <th data-col="gate">Gate</th>
          <th data-col="time">Last update</th>
          <th data-col="status">Status</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>

    <pre id="log" aria-label="Event log"></pre>
  </main>

  <!-- registra SW cuando esté disponible -->
  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('./service-worker.js')
        .then(r => console.log('🔧 SW listo →', r.scope))
        .catch(err => console.warn('SW error', err));
    }
  </script>
  
  <script src="app.js"></script>
</body>
</html>
